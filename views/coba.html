<!-- <!DOCTYPE html>
<html>
<head>
    <title>Control Lamp</title>
    <script>
        const socket = new WebSocket('ws://213.210.21.65:3000');

        socket.onopen = function() {
            console.log('Connected to WebSocket server');
        };

        socket.onmessage = function(event) {
            console.log('Message from server:', event.data);
        };

        socket.onclose = function() {
            console.log('Disconnected from WebSocket server');
        };

        socket.onerror = function(error) {
            console.log('WebSocket Error:', error);
        };

        function sendCommand(command) {
            if (socket.readyState === WebSocket.OPEN) {
                socket.send(command);
                console.log('Sent command:', command);
            } else {
                console.log('WebSocket is not open');
            }
        }

        function handleCheckboxChange(event) {
            const checkbox = event.target;
            const checkboxId = checkbox.id;

            switch (checkboxId) {
                case 'toggle_checkbox_1':
                    sendCommand(checkbox.checked ? '1' : '2');
                    break;
                case 'toggle_checkbox_2':
                    sendCommand(checkbox.checked ? '3' : '4');
                    break;
                case 'toggle_checkbox_3':
                    sendCommand(checkbox.checked ? '7' : '8');
                    break;
                case 'toggle_checkbox_4':
                    sendCommand(checkbox.checked ? '5' : '6');
                    break;
                default:
                    console.log('Unknown checkbox ID');
            }
        }
    </script>
</head>
<body>
    <h1>Control Lamp</h1>
    <input type="checkbox" id="toggle_checkbox_1" onchange="handleCheckboxChange(event)"> Lamp 1<br>
    <input type="checkbox" id="toggle_checkbox_2" onchange="handleCheckboxChange(event)"> Lamp 2<br>
    <input type="checkbox" id="toggle_checkbox_3" onchange="handleCheckboxChange(event)"> Lamp 3<br>
    <input type="checkbox" id="toggle_checkbox_4" onchange="handleCheckboxChange(event)"> Lamp 4<br>
</body>
</html> -->

//                                    HTTP        
<!-- <!DOCTYPE html>
<html>
<head>
    <title>Control Lamp</title>
    <script>
        function sendCommand(command) {
            fetch('http://213.210.21.65:3000/message', {  // Pastikan endpoint sesuai dengan yang ada di server
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ message: command }),  // Properti body disesuaikan
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                console.log('Command sent:', command);
            })
            .catch(error => {
                console.error('Error sending command:', error);
            });
        }

        function handleCheckboxChange(event) {
            const checkbox = event.target;
            const checkboxId = checkbox.id;

            switch (checkboxId) {
                case 'toggle_checkbox_1':
                    sendCommand(checkbox.checked ? '0' : '1');
                    break;
                case 'toggle_checkbox_2':
                    sendCommand(checkbox.checked ? '2' : '3');
                    break;
                case 'toggle_checkbox_3':
                    sendCommand(checkbox.checked ? '7' : '8');
                    break;
                case 'toggle_checkbox_4':
                    sendCommand(checkbox.checked ? '5' : '6');
                    break;
                default:
                    console.log('Unknown checkbox ID');
            }
        }
    </script>
</head>
<body>
    <h1>Control Lamp</h1>
    <input type="checkbox" id="toggle_checkbox_1" onchange="handleCheckboxChange(event)"> Lamp 1<br>
    <input type="checkbox" id="toggle_checkbox_2" onchange="handleCheckboxChange(event)"> Lamp 2<br>
    <input type="checkbox" id="toggle_checkbox_3" onchange="handleCheckboxChange(event)"> Lamp 3<br>
    <input type="checkbox" id="toggle_checkbox_4" onchange="handleCheckboxChange(event)"> Lamp 4<br>
</body>
</html> -->
<!DOCTYPE html>
<html>
<head>
    <title>Control Lamp</title>
    <script>
        let timer;
        let elapsedTime = 0;

        function startTimer() {
            timer = setInterval(() => {
                elapsedTime += 10;
                document.getElementById('timer').innerText = elapsedTime;
            }, 10);
        }

        function stopTimer() {
            clearInterval(timer);
        }

        function resetTimer() {
            stopTimer();
            elapsedTime = 0;
            document.getElementById('timer').innerText = elapsedTime;
        }

        function sendCommand(command) {
            fetch('http://213.210.21.65:3000/message', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ message: command }),
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                console.log('Command sent:', command);
                startTimer();
            })
            .catch(error => {
                console.error('Error sending command:', error);
            });
        }

        function handleCheckboxChange(event) {
            const checkbox = event.target;
            const checkboxId = checkbox.id;

            switch (checkboxId) {
                case 'toggle_checkbox_1':
                    sendCommand(checkbox.checked ? '0' : '1');
                    break;
                case 'toggle_checkbox_2':
                    sendCommand(checkbox.checked ? '2' : '3');
                    break;
                case 'toggle_checkbox_3':
                    sendCommand(checkbox.checked ? '7' : '8');
                    break;
                case 'toggle_checkbox_4':
                    sendCommand(checkbox.checked ? '5' : '6');
                    break;
                default:
                    console.log('Unknown checkbox ID');
            }
        }

        function pollServer() {
            fetch('http://213.210.21.65:3000/status')
            .then(response => response.json())
            .then(data => {
                if (data.elapsedTime !== undefined && data.elapsedTime > 0) {
                    stopTimer();
                    console.log('Elapsed time:', data.elapsedTime);
                    // Display the elapsed time or handle it as needed
                }
            })
            .catch(error => {
                console.error('Error polling server:', error);
            });
        }

        window.onload = function() {
            setInterval(pollServer, 1000); // Poll server every second
        };
    </script>
</head>
<body>
    <h1>Control Lamp</h1>
    <div>
        <span>Elapsed Time: </span><span id="timer">0</span> ms
    </div>
    <input type="checkbox" id="toggle_checkbox_1" onchange="handleCheckboxChange(event)"> Lamp 1<br>
    <input type="checkbox" id="toggle_checkbox_2" onchange="handleCheckboxChange(event)"> Lamp 2<br>
    <input type="checkbox" id="toggle_checkbox_3" onchange="handleCheckboxChange(event)"> Lamp 3<br>
    <input type="checkbox" id="toggle_checkbox_4" onchange="handleCheckboxChange(event)"> Lamp 4<br>
</body>
</html>











//===============================


<!-- 
<!DOCTYPE html>
<html>
<head>
    <title>Control Lamp</title>
    <script>
        const serverUrl = '/arduinoApi'; // Endpoint yang digunakan untuk mengirim perintah ke server

        function sendCommand(command) {
            fetch(serverUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ data: command }),
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                console.log('Command sent:', command);
            })
            .catch(error => {
                console.error('Error sending command:', error);
            });
        }

        function handleCheckboxChange(event) {
            const checkbox = event.target;
            const checkboxId = checkbox.id;

            switch (checkboxId) {
                case 'toggle_checkbox_1':
                    sendCommand(checkbox.checked ? '1' : '2');
                    break;
                case 'toggle_checkbox_2':
                    sendCommand(checkbox.checked ? '3' : '4');
                    break;
                case 'toggle_checkbox_3':
                    sendCommand(checkbox.checked ? '7' : '8');
                    break;
                case 'toggle_checkbox_4':
                    sendCommand(checkbox.checked ? '5' : '6');
                    break;
                default:
                    console.log('Unknown checkbox ID');
            }
        }
    </script>
</head>
<body>
    <h1>Control Lamp</h1>
    <input type="checkbox" id="toggle_checkbox_1" onchange="handleCheckboxChange(event)"> Lamp 1<br>
    <input type="checkbox" id="toggle_checkbox_2" onchange="handleCheckboxChange(event)"> Lamp 2<br>
    <input type="checkbox" id="toggle_checkbox_3" onchange="handleCheckboxChange(event)"> Lamp 3<br>
    <input type="checkbox" id="toggle_checkbox_4" onchange="handleCheckboxChange(event)"> Lamp 4<br>
</body>
</html> -->



